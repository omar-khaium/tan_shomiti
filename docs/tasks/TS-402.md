# TS-402 — Witness Sign-Off + Redo Flow

**Goal:** Enforce witness confirmations for a recorded draw and allow a transparent redo flow when the draw is compromised.  
**Rules coverage (rules.md):** §7 (draw integrity + witnesses + redo).  
**Depends on:** TS-401 (draw recording).  
**Out of scope:** payout approvals (TS-403).

## Stage 1 (Figma)

> Figma URLs pending. Until a Figma file is provided, this spec acts as the UI contract for Stage 2.

### Screen A — Draw record details (status + actions)

Purpose:
- Show the recorded draw (method, proof reference, winner) and its current status.
- Gate “finalized” state behind witness sign-offs.

Content:
- Month header (selected month).
- Summary card:
  - Method
  - Proof reference
  - Winner share key (member + share index)
  - Recorded at
- Status:
  - `Pending witness sign-off` / `Finalized`
- Actions:
  - “Collect witness sign-offs”
  - “Redo draw” (requires reason; keeps original draw for audit)

Required keys (for tests):
- `draw_record_month_label`
- `draw_record_method`
- `draw_record_proof_ref`
- `draw_record_winner`
- `draw_record_status`
- `draw_collect_witnesses`
- `draw_redo`

### Screen B — Witness sign-off (minimum 2)

Purpose:
- Record at least **two distinct witness confirmations** for the draw.
- Each sign-off is append-only and audit logged.

Content:
- Header: “Witness sign-off”
- Instruction: “At least 2 witnesses must confirm the draw result.”
- Witness rows (select from members):
  - Witness member (dropdown/search)
  - Optional note
  - “Confirm” action
- Counter: `Signed off: X / 2`
- Once `X >= 2`, show “Mark draw finalized”

Rules:
- The same witness cannot sign twice.
- Sign-off entries are append-only and ordered.

Required keys (for tests):
- `witness_count_label`
- `witness_add`
- `witness_member_picker`
- `witness_note`
- `witness_confirm`
- `witness_finalize`

### Screen C — Redo draw (invalidate + link)

Purpose:
- Invalidate the current draw (without deleting it), record a redo reason, then run a new draw.
- Preserve a verifiable audit trail: original draw remains visible and linked to the redo.

Content:
- Warning card: “Redo should be used only when the draw is compromised.”
- Reason field (required)
- “Invalidate and redo” action

Rules:
- Redo creates a new draw record linked to the original (original marked invalidated).
- Witness sign-offs (if any) remain on the original record.

Required keys (for tests):
- `redo_reason`
- `redo_confirm`

## Acceptance criteria
- A recorded draw is **not finalized** until at least **2 witnesses** sign off.
- Witness sign-offs are **append-only**, cannot duplicate the same witness.
- Redo invalidates the old draw but **does not delete** it; the redo is linked and auditable.

